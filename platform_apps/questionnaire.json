{
    "blocks": [],
    "contracts": [
        {
            "Name": "QNewQuestion",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract QNewQuestion {\n    data {\n        id int \"optional\"\n        description string\n        question string\n        answer string\n        operation string\n    }\n    conditions {\n\n    }\n    action {\n        if $operation == \"C\" {            \n            var answer_json array\n            answer_json[0] = $answer\n            answer_json = JSONEncode(answer_json)\n                \n            var q map\n            q[\"description\"] = $description\n            q[\"question\"] = $question\n            q[\"answer\"] = answer_json\n            q[\"ecosystem\"] = $ecosystem_id\n            q[\"init\"] = $key_id\n            q[\"deleted\"] = 0\n            q[\"status\"] = 1\n            DBInsert(\"@1questionnaire\", q)\n        }\n        if $operation == \"E\" {\n            var q map\n            q[\"description\"] = $description\n            q[\"question\"] = $question\n            q[\"ecosystem\"] = $ecosystem_id\n            q[\"init\"] = $key_id\n            q[\"deleted\"] = 0\n            q[\"status\"] = 1\n            DBUpdate(\"@1questionnaire\", $id, q)\n        }\n    }\n}"
        },
        {
            "Name": "QSandbox",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract QSandbox {\n    data {\n        answer string\n        operation string\n    }\n    conditions {\n\n    }\n    action {\n        if $operation == \"C\" {            \n            var answer_json array\n            answer_json[0] = $answer\n            answer_json = JSONEncode(answer_json)\n            warning Sprintf(\"%v\", answer_json)\n        }\n    }\n}"
        }
    ],
    "data": [],
    "languages": [
        {
            "Name": "q_answer",
            "Trans": "{\"en\": \"Answer\", \"ru\": \"Ответ\"}"
        },
        {
            "Name": "q_description",
            "Trans": "{\"en\": \"Description\", \"ru\": \"Описание\"}"
        },
        {
            "Name": "q_initiator",
            "Trans": "{\"en\": \"Initiator\", \"ru\": \"Инициатор\"}"
        },
        {
            "Name": "q_poll",
            "Trans": "{\"en\": \"Poll\", \"ru\": \"Опросы\"}"
        },
        {
            "Name": "q_question",
            "Trans": "{\"en\": \"Question\", \"ru\": \"Вопрос\"}"
        }
    ],
    "menus": [],
    "pages": [
        {
            "Name": "q_edit",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "//TODO создание/редактирование опроса редактирование допустимо только до старта",
            "Menu": "default_menu"
        },
        {
            "Name": "q_listing",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "//TODO отображение таблицы опросов",
            "Menu": "default_menu"
        },
        {
            "Name": "q_question",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "//TODO страница опроса",
            "Menu": "default_menu"
        }
    ],
    "parameters": [],
    "tables": [
        {
            "Name": "q_answers",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        },
        {
            "Name": "questionnaire",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        }
    ]
}