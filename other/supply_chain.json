{
    "blocks": [],
    "contracts": [
        {
            "Name": "ChainProcessRecipient",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract ChainProcessRecipient {\n    data {\n        ChainID int\n        notific_id int \n    }\n    conditions {\n        $stageID = DBFind(\"@1supply_stages\").Where({\"chain_id\":$ChainID}).One(\"id\")\n        var admin int\n        admin = Int(EcosysParam(\"role_admin\"))\n        if !RoleAccess(admin){\n            warning LangRes(\"@1access_denied\", \"en\")\n        }\n        //$pub = DBFind(\"@1keys\").Columns(\"id,pub,ecosystem\").Where({\"id\":$key_id}).One(\"pub\")\n        //$pub_sign = Sha256($pub)\n    }\n    action {\n        var bt string m map\n        bt = BlockTime()\n        m[\"status\"] = 3\n        m[\"date_end\"] = bt    \n        DBUpdate(\"@1supply_chains\", $ChainID, m)\n\n        var n map\n        n[\"recipient_sign_time\"] = bt \n        DBUpdate(\"@1supply_stages\", Int($stageID), n)\n\n        //@1NotificationsClose(\"notific_id\", $notific_id)\n    }\n}"
        },
        {
            "Name": "ChainProcessRecipientMulti",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract ChainProcessRecipientMulti {\n    data {\n        ChainID int\n        notific_id int \n    }\n    conditions {\n        $stageID = DBFind(\"@1supply_stages\").Where({\"chain_id\":$ChainID}).One(\"id\")\n        var admin int\n        admin = Int(EcosysParam(\"role_admin\"))\n        if !RoleAccess(admin){\n            warning LangRes(\"@1access_denied\", \"en\")\n        }\n        //$pub = DBFind(\"@1keys\").Columns(\"id,pub,ecosystem\").Where({\"id\":$key_id}).One(\"pub\")\n        //$pub_sign = Sha256($pub)\n    }\n    action {\n        var bt string m map\n        bt = BlockTime()\n        m[\"status\"] = 3\n        m[\"date_end\"] = bt    \n        DBUpdate(\"@1supply_chains\", $ChainID, m)\n\n        var n map\n        n[\"recipient_sign_time\"] = bt \n        DBUpdate(\"@1supply_stages\", Int($stageID), n)\n\n        //@1NotificationsClose(\"notific_id\", $notific_id)\n    }\n}"
        },
        {
            "Name": "ChainProcessRecipientSingle",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract ChainProcessRecipient {\n    data {\n        ChainID int\n        notific_id int \n    }\n    conditions {\n        $stageID = DBFind(\"@1supply_stages\").Where({\"chain_id\":$ChainID}).One(\"id\")\n        var admin int\n        admin = Int(EcosysParam(\"role_admin\"))\n        if !RoleAccess(admin){\n            warning LangRes(\"@1access_denied\", \"en\")\n        }\n        //$pub = DBFind(\"@1keys\").Columns(\"id,pub,ecosystem\").Where({\"id\":$key_id}).One(\"pub\")\n        //$pub_sign = Sha256($pub)\n    }\n    action {\n        var bt string m map\n        bt = BlockTime()\n        m[\"status\"] = 3\n        m[\"date_end\"] = bt    \n        DBUpdate(\"@1supply_chains\", $ChainID, m)\n\n        var n map\n        n[\"recipient_sign_time\"] = bt \n        DBUpdate(\"@1supply_stages\", Int($stageID), n)\n\n        @1NotificationsClose(\"notific_id\", $notific_id)\n    }\n}"
        },
        {
            "Name": "ChainProcessReject",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract ChainProcessReject {\n    data {\n        ChainID int\n    }\n    conditions {\n        var admin int\n        admin = Int(EcosysParam(\"role_admin\"))\n        if !RoleAccess(admin){\n            warning LangRes(\"@1access_denied\", \"en\")\n        }\n    }\n    action {\n        var m map\n        m[\"status\"] = 4\n        DBUpdate(\"@1supply_chains\", $ChainID, m)\n    }\n}"
        },
        {
            "Name": "ChainProcessSenderMulti",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract ChainProcessSenderMulti {\n    data {\n        ChainID int\n        notific_id int \n    }\n    conditions {\n        $stageID = DBFind(\"@1supply_stages\").Where({\"chain_id\":$ChainID}).One(\"id\")\n        var admin int\n        admin = Int(EcosysParam(\"role_admin\"))\n        if !RoleAccess(admin){\n            warning LangRes(\"@1access_denied\", \"en\")\n        }\n        //$pub = DBFind(\"@1keys\").Columns(\"id,pub,ecosystem\").Where({\"id\":$key_id}).One(\"pub\")\n        //$pub_sign = Sha256($pub)\n    }\n    action {\n        var bt string m map\n        bt = BlockTime()\n        m[\"status\"] = 2 \n        DBUpdate(\"@1supply_chains\", $ChainID, m)\n\n        var n map\n        n[\"sender_sign_time\"] = bt \n        DBUpdate(\"@1supply_stages\", Int($stageID), n)\n\n        //@1NotificationsClose(\"notific_id\", $notific_id)\n    }\n}"
        },
        {
            "Name": "ChainProcessSenderSingle",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract ChainProcessSenderMulti {\n    data {\n        ChainID int\n        notific_id int \n    }\n    conditions {\n        $stageID = DBFind(\"@1supply_stages\").Where({\"chain_id\":$ChainID}).One(\"id\")\n        var admin int\n        admin = Int(EcosysParam(\"role_admin\"))\n        if !RoleAccess(admin){\n            warning LangRes(\"@1access_denied\", \"en\")\n        }\n        //$pub = DBFind(\"@1keys\").Columns(\"id,pub,ecosystem\").Where({\"id\":$key_id}).One(\"pub\")\n        //$pub_sign = Sha256($pub)\n    }\n    action {\n        var bt string m map\n        bt = BlockTime()\n        m[\"status\"] = 2 \n        DBUpdate(\"@1supply_chains\", $ChainID, m)\n\n        var n map\n        n[\"sender_sign_time\"] = bt \n        DBUpdate(\"@1supply_stages\", Int($stageID), n)\n\n        //@1NotificationsClose(\"notific_id\", $notific_id)\n    }\n}"
        },
        {
            "Name": "SupplyNotificSend",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract SupplyNotificSend {\n    data {\n        chain_id int\n        sender_role_id int \n        recipient_role_id int \n    }\n\n    conditions {\n\n        var admin_id int\n        admin_id = EcosysParam(\"role_admin\")\n        if !RoleAccess(Int(admin_id)) {\n            warning LangRes(\"@1access_denied\", \"en\")\n        }\n    }\n\n    action {\n        var params map\n        params[\"chain_id\"] = $chain_id\n\n        @1NotificationsSend(\"rid,sender,icon_name,text_header,text_body,page_name,params_map,closure_type\", $sender_role_id, 1, \"fa-check\", LangRes(\"@1supply_chain\", \"en\"), \"test\", \"@1Act_sender\", params,1)\n        @1NotificationsSend(\"rid,sender,icon_name,text_header,text_body,page_name,params_map,closure_type\", $recipient_role_id, 1, \"fa-check\", LangRes(\"@1supply_chain\", \"en\"), \"test\", \"@1Act_recipient\", params,1)\n\n    }\n}"
        },
        {
            "Name": "ChainStage",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract ChainStage {\n    data { \n        objectID int \"optional\"\n        templateID int\n    }\n    conditions {\n    $recipientID = Int(DBFind(\"@1supply_templates\").Where({\"id\":$templateID}).Columns(\"chain->recipient_id\").One(\"chain.recipient_id\"))\n    $senderID = Int(DBFind(\"@1supply_templates\").Where({\"id\":$templateID}).Columns(\"chain->sender_id\").One(\"chain.sender_id\"))\n    $chainID = Int(DBFind(\"@1supply_chains\").Where({\"object_id\":$objectID}).One(\"id\"))\n    }\n    action {\n    var n map \n    n[\"chain_id\"] = $chainID \n    n[\"recipient_ID\"] = $recipientID\n    n[\"sender_ID\"] = $senderID\n    DBInsert(\"@1supply_stages\", n)\n    }\n}"
        },
        {
            "Name": "ChainStages",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract ChainStages {\n    data {\n        Object int\n        Template int\n    }\n    conditions {\n        var admin int\n        admin = Int(EcosysParam(\"role_admin\"))\n        if !RoleAccess(admin){\n            warning LangRes(\"@1access_denied\", \"en\")\n        }\n\n        $templateName = DBFind(\"@1supply_templates\").Where({\"id\":$Template}).Columns(\"id,name\").One(\"name\")\n        $objectName = DBFind(\"@1supply_objects\").Where({\"id\":$Object}).Columns(\"id,name\").One(\"name\")\n    }\n    action {\n        //var bt string m map\n        //bt = BlockTime()\n        //m[\"object_id\"] = $Object\n        //m[\"template_id\"] = $Template\n        //m[\"template_name\"] = $templateName\n        //m[\"object_name\"] = $objectName\n        //m[\"status\"] = 1\n        //m[\"date_start\"] = bt\n        //$chainID = DBInsert(\"@1supply_chains\", m)\n        //$result = $chainID\n\n        \n        $sr = DBFind(\"@1supply_templates\").WhereId($Template).One(\"str\")\n        var myarr array\n        myarr = Split($sr, \"%s\")\n        \n        var i int\n        i=1\n        while i < Len(myarr) {\n            var arr_map map\n            arr_map = JSONDecode(myarr[i])\n            info(arr_map[\"recipient\"])\n            break\n        }   \n    }\n}"
        },
        {
            "Name": "CreateObject",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract CreateObject {\n    data {\n    Name string\n    Weight int\n    image file \"optional\"\n    }\n    conditions {\n        $Body = $image[\"Body\"]\n        $ImageMimeType = $image[\"MimeType\"] \n    }\n\n    action {\n        var m map\n        $appId = Int(DBFind(\"@1applications\").Where({ecosystem:1, name:\"supply_chain\"}).One(\"id\"))\n        $imageId=@1UploadBinary(\"ApplicationId,Name,Data,DataMimeType\", $appId, $Name, $Body, $ImageMimeType)\n        m[\"name\"] = $Name\n        m[\"weight\"] = $Weight\n        m[\"image_id\"] = $imageId\n        m[\"status\"] = 1\n        \n        DBInsert(\"supply_objects\", m)\n    }\n}"
        },
        {
            "Name": "CreateTemplate",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract CreateTemplate {\n    data {\n        Name string\n        Sender int\n        Recipient int\n        StartingDate string\n        StartingTime string\n        EndingDate string\n        EndingTime string\n        SupplyMap string\n    }\n    func dateAddTime(d, t string) string {\n        var dt string\n        if Contains(d, \"T00:00:00Z\") {\n            d = Replace(d, \"T00:00:00Z\", \"\")\n        }\n        if Size(t) == 5 {\n            dt = Sprintf(\"%v %v:00\", d, t)\n        }\n        return dt\n    }\n    conditions {\n        var admin int\n        admin = Int(EcosysParam(\"role_admin\"))\n        if !RoleAccess(admin){\n            warning LangRes(\"@1access_denied\", \"en\")\n        }\n\n        $dateStart = UnixDateTime(dateAddTime($StartingDate, $StartingTime))\n        if $dateStart == 0 {\n            warning \"Invalid starting date\"\n        }\n        $dateEnd = UnixDateTime(dateAddTime($EndingDate, $EndingTime))\n        if $dateEnd == 0 {\n            warning \"Invalid ending date\"\n        }\n    }\n    action {\n     var m addr map encAddr string \n        addr = JSONDecode($SupplyMap)\n        addr[\"zoom\"] = 11\n        encAddr = JSONEncode(addr)\n        $senderRoleName = DBFind(\"@1roles\").Where({ecosystem:$ecosystem_id,id:$Sender, deleted:0}).One(\"role_name\")\n        $recipientRoleName = DBFind(\"@1roles\").Where({ecosystem:$ecosystem_id,id:$Recipient, deleted:0}).One(\"role_name\")\n        m[\"name\"] = $Name\n        m[\"chain\"] = {recipient_id:$Recipient,sender_id:$Sender,starting:$dateStart,ending:$dateEnd,recipient_role_name:$recipientRoleName,sender_role_name:$senderRoleName}\n        m[\"total_steps\"] = 1\n        m[\"counter\"] = 0\n        m[\"supply_map\"] = {cords:encAddr}\n        m[\"deleted\"] = 0\n        DBInsert(\"@1supply_templates\", m)\n    }\n}"
        },
        {
            "Name": "CreateTemplateMultisteps",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract CreateTemplateMultisteps {\n    data {\n        Steps int \n        Name string\n        Sender array\n        Recipient array\n        StartingDate array\n        StartingTime array\n        EndingDate array\n        EndingTime array\n        SupplyMap string \"optional\"\n    }\n    conditions {\n        var admin int\n        admin = Int(EcosysParam(\"role_admin\"))\n        if !RoleAccess(admin){\n            warning LangRes(\"@1access_denied\", \"en\")\n        }\n    }\n   action {\n        var i j int \n        var Trans steps map\n        var stt string\n        var json map\n        while i < Int($Steps) {\n            if i == 0 {\n                steps[\"sender\"] = $Sender[i]\n                steps[\"recipient\"] = $Recipient[i]\n                //steps[\"date_start\"] = JSONDecode($StartingDate[i])\n                //steps[\"date_end\"] = JSONDecode($EndingDate[i])\n            } else {\n                j = i - 1\n                steps[\"sender\"] = $Recipient[j]\n                steps[\"recipient\"] = $Recipient[i]\n               // steps[\"date_start\"] = JSONDecode($StartingDate[j])\n                //steps[\"date_end\"] = JSONDecode($EndingDate[j])\n            }\n            var params map\n            params[\"Trans\"] = JSONEncode(steps)\n            if i == 0 {\n                stt = \"[\" + Str(params[\"Trans\"])\n            } else{ \n                stt = stt + \",\" + Str(params[\"Trans\"])\n            }\n            i = i + 1\n        }\n        json = stt + \"]\"\n        var addr map encAddr string \n        addr = JSONDecode($SupplyMap)\n        addr[\"zoom\"] = 11\n        encAddr = JSONEncode(addr)\n        //var m map\n        //m[\"name\"] = $Name\n        //m[\"chain\"] = {stages:stt}\n        //m[\"counter\"] = 0\n        //m[\"deleted\"] = 0\n        //m[\"supply_map\"] = {cords:encAddr}\n        //m[\"total_steps\"] = $Steps\n\n        DBInsert(\"@1supply_templates\",{name:$Name,chain:json,counter:0,deleted:0,supply_map:encAddr,total_steps:$Steps})\n\t}\n}"
        },
        {
            "Name": "CreateTemplateSingle",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract CreateTemplateSingle {\n    data {\n        Name string\n        Sender int\n        Recipient int\n        StartingDate string\n        StartingTime string\n        EndingDate string\n        EndingTime string\n        SupplyMap string\n    }\n    func dateAddTime(d, t string) string {\n        var dt string\n        if Contains(d, \"T00:00:00Z\") {\n            d = Replace(d, \"T00:00:00Z\", \"\")\n        }\n        if Size(t) == 5 {\n            dt = Sprintf(\"%v %v:00\", d, t)\n        }\n        return dt\n    }\n    conditions {\n        var admin int\n        admin = Int(EcosysParam(\"role_admin\"))\n        if !RoleAccess(admin){\n            warning LangRes(\"@1access_denied\", \"en\")\n        }\n\n        $dateStart = UnixDateTime(dateAddTime($StartingDate, $StartingTime))\n        if $dateStart == 0 {\n            warning \"Invalid starting date\"\n        }\n        $dateEnd = UnixDateTime(dateAddTime($EndingDate, $EndingTime))\n        if $dateEnd == 0 {\n            warning \"Invalid ending date\"\n        }\n    }\n    action {\n     var m addr map encAddr string \n        addr = JSONDecode($SupplyMap)\n        addr[\"zoom\"] = 11\n        encAddr = JSONEncode(addr)\n        $senderRoleName = DBFind(\"@1roles\").Where({ecosystem:$ecosystem_id,id:$Sender, deleted:0}).One(\"role_name\")\n        $recipientRoleName = DBFind(\"@1roles\").Where({ecosystem:$ecosystem_id,id:$Recipient, deleted:0}).One(\"role_name\")\n        m[\"name\"] = $Name\n        m[\"chain\"] = {recipient_id:$Recipient,sender_id:$Sender,starting:$dateStart,ending:$dateEnd,cords:$addr,recipient_role_name:$recipientRoleName,sender_role_name:$senderRoleName}\n        m[\"counter\"] = 0\n        m[\"deleted\"] = 0\n\t\tm[\"total_steps\"] = 1\n        DBInsert(\"@1supply_templates\", m)\n    }\n}"
        },
        {
            "Name": "ChainSingleStart",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract ChainSingleStart {\n    data {\n        Object int\n        Template int\n    }\n    conditions {\n        var admin int\n        admin = Int(EcosysParam(\"role_admin\"))\n        if !RoleAccess(admin){\n            warning LangRes(\"@1access_denied\", \"en\")\n        }\n\n        $templateName = DBFind(\"@1supply_templates\").Where({\"id\":$Template}).Columns(\"id,name\").One(\"name\")\n        $objectName = DBFind(\"@1supply_objects\").Where({\"id\":$Object}).Columns(\"id,name\").One(\"name\")\n        $recipientID = Int(DBFind(\"@1supply_templates\").Where({\"id\":$Template}).Columns(\"chain->recipient_id\").One(\"chain.recipient_id\"))\n        $senderID = Int(DBFind(\"@1supply_templates\").Where({\"id\":$Template}).Columns(\"chain->sender_id\").One(\"chain.sender_id\"))\n    }\n    action {\n    var bt string m map\n    bt = BlockTime()\n    m[\"object_id\"] = $Object\n    m[\"template_id\"] = $Template\n    m[\"template_name\"] = $templateName\n    m[\"object_name\"] = $objectName\n    m[\"status\"] = 1\n    m[\"date_start\"] = bt\n    m[\"recipients_id\"] = $recipientID\n    m[\"senders_id\"] = $senderID\n    $chainID = DBInsert(\"@1supply_chains\", m)\n    $result = $chainID\n\n    var n map\n    n[\"chain_id\"] = $chainID \n    n[\"recipient_ID\"] = $recipientID\n    n[\"sender_ID\"] = $senderID\n    DBInsert(\"@1supply_stages\", n)\n    \n    @1SupplyNotificSend(\"chain_id,sender_role_id,recipient_role_id\",$chainID,$senderID,$recipientID)\n    }\n}"
        },
        {
            "Name": "Testim",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract Testim {\n    data {\n\n    }\n    conditions {\n        \n    }\n    action {\n        $sr = DBFind(\"@1supply_templates\").WhereId(33).One(\"chain\")\n        var myarr map\n        myarr = Split($sr, \",\")\n        myarr = JSONDecode($sr)\n        var i int\n        while i < Len(myarr) {\n            var arr_map map m map\n            arr_map = myarr[i]\n            m[\"sender_id\"] = arr_map[\"sender\"]\n            m[\"recipient_id\"] = arr_map[\"sender\"]\n            DBInsert(\"@1supply_stages\",m)\n            break\n        } \n        i = i + 1\n    }\n}"
        }
    ],
    "data": [],
    "languages": [],
    "menus": [],
    "pages": [
        {
            "Name": "Act_recipient",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "DBFind(@1notifications).Where({id:#notific_id#,ecosystem:#ecosystem_id#}).Columns(\"id,page_params->chain_id,ecosystem\").Vars(prefix)\nDBFind(@1supply_chains).Where({id:#prefix_page_params_chain_id#}).Vars(chains)\nDBFind(@1supply_templates).Where({id:#chains_template_id#}).Columns(\"id,chain->starting,chain->ending\").Vars(templates)\nDiv(content-wrapper){\n    Div(row){\n        Div(col-sm-8 col-sm-offset-2 col-lg-6 col-lg-offset-3){\n            Form(panel panel-default){\n                Div(panel-heading text-center){\n                    Span(Class: h3, Body: $@1chain_act$)\n                }\n                Div(panel-body){\n                    Div(list-group-item text-center){\n                        Div(text-muted m0 h5, Body: LangRes(@1object_name))\n                        Span(Class: h5 text-bold, Body: #chains_object_name#)\n                    }\n                    Div(list-group-item text-center){\n                        Div(text-muted m0 h5, Body: LangRes(@1template_name))\n                        Span(Class: h5 text-bold, Body: #chains_template_name#)\n                    }\n                    Div(list-group-item text-center){\n                        Div(text-muted m0 h5, Body: LangRes(@1your_must_sign_time))\n                        Div(Class: #style_text# h6 m0, Body: DateTime(DateTime: #templates_chain_starting#, Format: \"DD.MM.YYYY HH:MI\"))\n                    }\n                    Div(list-group-item text-center){\n                        Div(text-muted m0 h5, Body: LangRes(@1recipient_must_sign_time))\n                        Div(Class: #style_text# h6 m0, Body: DateTime(DateTime: #templates_chain_ending#, Format: \"DD.MM.YYYY HH:MI\"))\n                    }\n                    Div(row){\n                        Div(col-md-6 mt-lg text-right){\n                            Button(Class: btn btn-danger mh-sm, Body: $@1reject_act$, Contract: @1ChainProcessReject, Page: @1chains_list, Params: \"ChainID=#prefix_page_params_chain_id#,notific_id=#notific_id#\")\n                        }\n                        Div(col-md-6 mt-lg text-left){\n                            Button(Class: btn btn-success mh-sm, Body: $@1sign_act$, Contract: @1ChainProcessRecipient, Page: @1chains_list, Params: \"ChainID=#prefix_page_params_chain_id#,notific_id=#notific_id#\")\n                        }\n                    }\n                }\n            }\n        }\n    }\n}",
            "Menu": "default_menu"
        },
        {
            "Name": "Act_sender",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "DBFind(@1notifications).Where({id:#notific_id#,ecosystem:#ecosystem_id#}).Columns(\"id,page_params->chain_id,ecosystem\").Vars(prefix)\nDBFind(@1supply_chains).Where({id:#prefix_page_params_chain_id#}).Vars(chains)\nDBFind(@1supply_templates).Where({id:#chains_template_id#}).Columns(\"id,chain->starting,chain->ending\").Vars(templates)\nDiv(content-wrapper){\n    Div(row){\n        Div(col-sm-8 col-sm-offset-2 col-lg-6 col-lg-offset-3){\n            Form(panel panel-default){\n                Div(panel-heading text-center){\n                    Span(Class: h3, Body: $@1chain_act$)\n                }\n                Div(panel-body){\n                    Div(list-group-item text-center){\n                        Div(text-muted m0 h5, Body: LangRes(@1object_name))\n                        Span(Class: h5 text-bold, Body: #chains_object_name#)\n                    }\n                    Div(list-group-item text-center){\n                        Div(text-muted m0 h5, Body: LangRes(@1template_name))\n                        Span(Class: h5 text-bold, Body: #chains_template_name#)\n                    }\n                    Div(list-group-item text-center){\n                        Div(text-muted m0 h5, Body: LangRes(@1your_must_sign_time))\n                        Div(Class: #style_text# h6 m0, Body: DateTime(DateTime: #templates_chain_starting#, Format: \"DD.MM.YYYY HH:MI\"))\n                    }\n                    Div(list-group-item text-center){\n                        Div(text-muted m0 h5, Body: LangRes(@1recipient_must_sign_time))\n                        Div(Class: #style_text# h6 m0, Body: DateTime(DateTime: #templates_chain_ending#, Format: \"DD.MM.YYYY HH:MI\"))\n                    }\n                    Div(row){\n                        Div(col-md-6 mt-lg text-right){\n                            Button(Class: btn btn-danger mh-sm, Body: $@1reject_act$, Contract: @1ChainProcessReject, Page: @1chains_list, Params: \"ChainID=#prefix_page_params_chain_id#\")\n                        }\n                        Div(col-md-6 mt-lg text-left){\n                            Button(Class: btn btn-success mh-sm, Body: $@1sign_act$, Contract: @1ChainProcessSenderSingle, Page: @1chains_list, Params: \"ChainID=#prefix_page_params_chain_id#,notific_id=#notific_id#\")\n                        }\n                    }\n                }\n            }\n        }\n    }\n}",
            "Menu": "default_menu"
        },
        {
            "Name": "chain1",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "Div(Class: content-wrapper){\n    SetTitle($create_supply_chain$)\n    Div(Class: row df f-valign){\n        Div(Class: col-md-3)\n        Div(Class: col-md-6){\n            Div(Class: panel panel-primary){\n                Div(Class: panel-heading, Body: LangRes(supply_chain))\n                Form(){\t\t\t\t\t\n                    Div(Class: list-group-item){\n                        Div(Class: row df f-valign){\n                            Div(Class: col-md-3 mt-sm text-right){\n                                Label(For: Object){\n                                    Span(Body: LangRes(object))\n                                }\n                            }\n                            Div(Class: col-md-9 mc-sm text-left){\n\t\t\t\t\t\t\t\tDBFind(@1supply_objects, src_objects)\n\t\t\t\t\t\t\t\tSelect(Name: Object, Source: src_objects, NameColumn: name, ValueColumn: id)\n                            } \n                            Div(Class: col-md-3 mt-sm text-right){\n                                Label(For: Template){\n                                    Span(Body: LangRes(template))\n                                }\n                            }\n                            Div(Class: col-md-9 mc-sm text-left){\n\t\t\t\t\t\t\t\tDBFind(@1supply_templates, src_templates)\n\t\t\t\t\t\t\t\tSelect(Name: Template, Source: src_templates, NameColumn: name, ValueColumn: id)\n                            } \n                        }\n                    }\n\n                    Div(Class: panel-footer clearfix){\n                        Div(Class: pull-right){\n\t\t\t\t\t\t\tButton(Body: LangRes(start_chain), Class: btn btn-primary, Page: @1chain2, PageParams: \"object_id=Val(Object),template_id=Val(Template)\")\n                        }\n                    }\n                }\n\n            }\n        }\n        Div(Class: col-md-3)\n    }\n}",
            "Menu": "default_menu"
        },
        {
            "Name": "chain2",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "DBFind(@1supply_objects).Where({id:#object_id#}).Vars(objects)\nDBFind(@1supply_templates).Where({id:#template_id#}).Columns(\"id,name,chain->sender_id,chain->recipient_id,chain->starting,chain->ending,chain->cords,chain->sender_role_name,chain->recipient_role_name\").Vars(templates)\nDiv(content-wrapper){\n    Div(row){\n        Div(col-sm-8 col-sm-offset-2 col-lg-6 col-lg-offset-3){\n            Form(panel panel-default){\n                Div(panel-heading text-center){\n                    Span(Class: h3, Body: $@1chain_info$)\n                }\n                Div(panel-body){\n                    Div(form-group){\n                        Div(row){\n                            Div(col-md-12 mt-sm text-center){                               \n                                Image(Src: Binary().ById(#objects_image_id#), Class: photo).Style(height: 150px;width: 150px; border: 1px solid #5A5D63; margin-right: 10px;)\n                            }\n                        }\n                    }\n                    Div(list-group-item text-center){\n                        Div(text-muted m0 h5, Body: LangRes(@1object_name))\n                        Span(Class: h5 text-bold, Body: #objects_name#)\n                    }\n                    Div(list-group-item text-center){\n                        Div(text-muted m0 h5, Body: LangRes(@1template_name))\n                        Span(Class: h5 text-bold, Body: #templates_name#)\n                    }\n                    Div(list-group-item text-center){\n                        Div(text-muted m0 h5, Body: LangRes(@1sender_role))\n                        Span(Class: h5 text-bold, Body: #templates_chain_sender_role_name#)\n                    }\n                    Div(list-group-item text-center){\n                        Div(text-muted m0 h5, Body: LangRes(@1recipient_role))\n                        Span(Class: h5 text-bold, Body: #templates_chain_recipient_role_name#)\n                    }\n                    Div(row){\n                        Div(col-md-12 mt-lg text-center){\n                            Button(Class: btn btn-success mh-sm, Body: $@1start_chain$, Contract: @1ChainStages, Page: @1supply_list, Params: \"Object=#object_id#,Template=#template_id#)\n                        }\n                    }\n                }\n            }\n        }\n    }\n}",
            "Menu": "default_menu"
        },
        {
            "Name": "chain_list",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "SetVar(this_page, @1chain_list).(this_table, @1supply_chains)\nInclude(@1pager_header)\nSetTitle(\"$@chains$\")\nSpan(Class: text-muted h5 m0 mb ml-lg, Body: Span(Class: ml-sm, Body: \"$@chains_list$\"))\nDBFind(#this_table#, src).Custom(date_started){\n    Div(Class:h5){DateTime(DateTime: #date_start#, Format: \"YYYY.MM.DD HH:MI:SS\")}\n}.Custom(date_ended){\n    Div(Class:h5){DateTime(DateTime: #chain.end#, Format: \"YYYY.MM.DD HH:MI:SS\")}\n}.Custom(custom_status){\n    If(#status#==1){\n        Div(Class: text-normal, Body: \"$@1chain_created$\")\n    }.ElseIf(#status#==2){\n        Div(Class: text-normal, Body: \"$@chain_started$\")\n    }.ElseIf(#status#==3){\n        Div(Class: text-success, Body: \"$@chain__completed$\")\n    }.ElseIf(#status#==4){\n        Div(Class: text-warning, Body: \"$@1chain_failed$\")\n    }.Else{\n        Span(\"\")\n    }\n}.Custom(custom_action){\n    Button(Body: LangRes(@1view_chain), Class: btn btn-primary, Page: @1chain_view,PageParams:\"chain_id=#id#\")\n}\nDiv(fullscreen){\n    Div(table-responsive ml-lg mr-lg){\n        Div(list-group-item){\n            Table(src, \"$@1id$=id,$@1object_name$=object_name,$@1date_start$=date_started,$@1date_end$=date_ended,$@1status$=custom_status,action=custom_action\")                      \n        }.Style(\n            margin-top:-15px;\n            tbody > tr:nth-of-type(odd) {\n                background-color: #f8f9fc;\n            }\n        )\n    }\n}",
            "Menu": "default_menu"
        },
        {
            "Name": "chain_object_template",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "Div(Class: content-wrapper){\n    SetTitle($create_supply_chain$)\n    Div(Class: row df f-valign){\n        Div(Class: col-md-3)\n        Div(Class: col-md-6){\n            Div(Class: panel panel-primary){\n                Div(Class: panel-heading, Body: LangRes(supply_chain))\n                Form(){\t\t\t\t\t\n                    Div(Class: list-group-item){\n                        Div(Class: row df f-valign){\n                            Div(Class: col-md-3 mt-sm text-right){\n                                Label(For: Object){\n                                    Span(Body: LangRes(object))\n                                }\n                            }\n                            Div(Class: col-md-9 mc-sm text-left){\n\t\t\t\t\t\t\t\tDBFind(@1supply_objects, src_objects)\n\t\t\t\t\t\t\t\tSelect(Name: Object, Source: src_objects, NameColumn: name, ValueColumn: id)\n                            } \n                            Div(Class: col-md-3 mt-sm text-right){\n                                Label(For: Template){\n                                    Span(Body: LangRes(template))\n                                }\n                            }\n                            Div(Class: col-md-9 mc-sm text-left){\n\t\t\t\t\t\t\t\tDBFind(@1supply_templates, src_templates)\n\t\t\t\t\t\t\t\tSelect(Name: Template, Source: src_templates, NameColumn: name, ValueColumn: id)\n                            } \n                        }\n                    }\n\n                    Div(Class: panel-footer clearfix){\n                        Div(Class: pull-right){\n\t\t\t\t\t\t\tButton(Body: LangRes(start_chain), Class: btn btn-primary, Page: @1chain_single_start, PageParams: \"object_id=Val(Object),template_id=Val(Template)\")\n                        }\n                    }\n                }\n\n            }\n        }\n\n        Div(Class: col-md-3)\n    }\n}",
            "Menu": "default_menu"
        },
        {
            "Name": "chain_single_start",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "DBFind(@1supply_objects).Where({id:#object_id#}).Vars(objects)\nDBFind(@1supply_templates).Where({id:#template_id#}).Columns(\"id,name,chain->sender_id,chain->recipient_id,chain->starting,chain->ending,chain->cords,chain->sender_role_name,chain->recipient_role_name\").Vars(templates)\nDiv(content-wrapper){\n    Div(row){\n        Div(col-sm-8 col-sm-offset-2 col-lg-6 col-lg-offset-3){\n            Form(panel panel-default){\n                Div(panel-heading text-center){\n                    Span(Class: h3, Body: $@1chain_info$)\n                }\n                Div(panel-body){\n                    Div(form-group){\n                        Div(row){\n                            Div(col-md-12 mt-sm text-center){                               \n                                Image(Src: Binary().ById(#objects_image_id#), Class: photo).Style(height: 150px;width: 150px; border: 1px solid #5A5D63; margin-right: 10px;)\n                            }\n                        }\n                    }\n                    Div(list-group-item text-center){\n                        Div(text-muted m0 h5, Body: LangRes(@1object_name))\n                        Span(Class: h5 text-bold, Body: #objects_name#)\n                    }\n                    Div(list-group-item text-center){\n                        Div(text-muted m0 h5, Body: LangRes(@1template_name))\n                        Span(Class: h5 text-bold, Body: #templates_name#)\n                    }\n                    Div(list-group-item text-center){\n                        Div(text-muted m0 h5, Body: LangRes(@1sender_role))\n                        Span(Class: h5 text-bold, Body: #templates_chain_sender_role_name#)\n                    }\n                    Div(list-group-item text-center){\n                        Div(text-muted m0 h5, Body: LangRes(@1recipient_role))\n                        Span(Class: h5 text-bold, Body: #templates_chain_recipient_role_name#)\n                    }\n                    Div(row){\n                        Div(col-md-12 mt-lg text-center){\n                            Button(Class: btn btn-success mh-sm, Body: $@1start_chain$, Contract: @1ChainSingleStart, Page: @1supply_list, Params: \"Object=#object_id#,Template=#template_id#)\n                        }\n                    }\n                }\n            }\n        }\n    }\n}",
            "Menu": "default_menu"
        },
        {
            "Name": "chain_view",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "SetVar(this_page, @1chain_view).(this_table, @1supply_stages)\nInclude(@1pager_header)\nSetTitle(\"$@chains$\")\nSpan(Class: text-muted h5 m0 mb ml-lg, Body: Span(Class: ml-sm, Body: \"$@chains_info$\"))\nDBFind(#this_table#, src).Where({chain_id:#chain_id#}).Columns(\"id,recipient_id,recipient_sign_time,sender_id,sender_sign_time,recipient_sign,sender_sign\")\t\n\n\nDiv(fullscreen){\n    Div(table-responsive ml-lg mr-lg){\n        Div(list-group-item){\n            Table(src, \"id=id\")                      \n        }.Style(\n            margin-top:-15px;\n            tbody > tr:nth-of-type(odd) {\n                background-color: #f8f9fc;\n            }\n        )\n    }\n}",
            "Menu": "default_menu"
        },
        {
            "Name": "chains_list",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "SetVar(this_page, @1chain_list).(this_table, @1supply_chains)\nInclude(@1pager_header)\nSetTitle(\"$@chains$\")\nSpan(Class: text-muted h5 m0 mb ml-lg, Body: Span(Class: ml-sm, Body: \"$@chains_list$\"))\nDBFind(#this_table#, src).Custom(date_started){\n    Div(Class:h5){DateTime(DateTime: #date_start#, Format: \"YYYY.MM.DD HH:MI:SS\")}\n}.Custom(date_ended){\n    Div(Class:h5){DateTime(DateTime: #chain.end#, Format: \"YYYY.MM.DD HH:MI:SS\")}\n}.Custom(custom_status){\n    DBFind(#this_table#)\n    If(#status#==1){\n        Div(Class: text-normal, Body: \"$@1chain_created$\")\n    }.ElseIf(#status#==2){\n        Div(Class: text-normal, Body: \"$@chain_started$\")\n    }.ElseIf(#status#==3){\n        Div(Class: text-success, Body: \"$@chain__completed$\")\n    }.ElseIf(#status#==4){\n        Div(Class: text-warning, Body: \"$@1chain_failed$\")\n    }.Else{\n        Span(\"\")\n    }\n}\nDiv(fullscreen){\n    Div(table-responsive ml-lg mr-lg){\n        Div(list-group-item){\n            Table(src, \"$@1id$=id,$@1object_name$=object_name,$@1template_name$=template_name,$@1date_start$=date_started,$@1date_end$=date_ended,$@1status$=custom_status\")                      \n        }.Style(\n            margin-top:-15px;\n            tbody > tr:nth-of-type(odd) {\n                background-color: #f8f9fc;\n            }\n        )\n    }\n}",
            "Menu": "default_menu"
        },
        {
            "Name": "create_object",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "Div(content-wrapper){\n    Div(row){\n        Div(col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3){\n            Form(panel panel-primary){\n                Div(panel-heading, Body: LangRes(@1creating_object))\n                Div(panel-body){\n                    Div(row){\n                        Div(col-md-12 mc-sm text-left){\n                            Div(form-group){\n                                Label(){\n                                    Span(Body: LangRes(@1object_name))\n                                    Span(Class: text-danger, Body:*)\n                                }\n                                Input(Name: Name)\n                                \n                                Label(){\n                                    Span(Body: LangRes(@1object_weight))\n                                    Span(Class: text-danger, Body:*)\n                                }\n                                Input(Name: Weight)\n                                \n                                Label(){\n                                    Span(Body: LangRes(@1object_image))\n                                    Span(Class: text-danger, Body:*)\n                                }\n                                Input(Name: image, Type: file)\n                        }\n                    }\n                }\n                Div(panel-footer text-left){\n                    Button(Body: LangRes(@1back), Class: btn btn-default, Page: @1create_object)\n                    Button(Body: LangRes(@1create), Class: btn btn-primary pull-right, Page: @1objects_list, Contract: @1CreateObject).Alert(Text: \"$@1want_create_object$\", ConfirmButton: $@1yes$, CancelButton: $@1no$, Icon: question)\n                }\n            }\n        }\n    }\n}",
            "Menu": "default_menu"
        },
        {
            "Name": "objects_list",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "SetVar(this_page, @1objects_list).(this_table, @1supply_objects)\nInclude(@1pager_header)\n\nSetTitle(\"$@1objects$\")\nSpan(Class: text-muted h5 m0 mb ml-lg, Body: Span(Class: ml-sm, Body: \"$@1objects_list$\"))\nAddToolButton(Title: $@1create_object$, Page: @1create_object, Icon: icon-plus).Popup(Header: $@1create_object$, Width: \"50\")\n\nDBFind(#this_table#, src).Custom(custom_status){\n    DBFind(#this_table#)\n    If(#status#==1){\n        Div(Class: text-normal, Body: \"$@1created$\")\n    }.ElseIf(#status#==2){\n        Div(Class: text-normal, Body: \"$@1in_chain$\")\n    }.ElseIf(#status#==3){\n        Div(Class: text-success, Body: \"$@1delivered$\")\n    }.ElseIf(#status#==4){\n        Div(Class: text-warning, Body: \"$@1delivery_failed$\")\n    }.Else{\n        Span(\"\")\n    }\n}.Custom(custom_image){\n        Image(Src: Binary().ById(#image_id#), Class: photo).Style(height: 60px;width: 60px; border: 1px solid #5A5D63; margin-right: 10px;)\n}.Custom(custom_action){\n    DBFind(#this_table#)\n    If(#status#==1){\n        Button(Body: LangRes(@1send_by_chain), Class: btn btn-primary, Page: @1chain1)\n    }.ElseIf(#status#==2){\n        Button(Body: LangRes(@1view_chain), Class: btn btn-primary, Page: @1chain_list)\n    }.ElseIf(#status#==3){\n        Button(Body: LangRes(@1view_chain), Class: btn btn-primary, Page: @1chain_list)\n    }.ElseIf(#status#==4){\n        Button(Body: LangRes(@1view_chain), Class: btn btn-primary, Page: @1chain_list)\n    }.Else{\n        Span(\"\")\n    }\n}\nDiv(fullscreen){\n    Div(table-responsive ml-lg mr-lg){\n        Div(list-group-item){\n            Table(src, \"$@1id$=id,$@1image$=custom_image,$@1name$=name,$@1object_weight$=weight,$@1status$=custom_status,$@1action$=custom_action\")                      \n        }.Style(\n            margin-top:-15px;\n            tbody > tr:nth-of-type(odd) {\n                background-color: #f8f9fc;\n            }\n        )\n    }\n}",
            "Menu": "default_menu"
        },
        {
            "Name": "send_from_list",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "Div(Class: content-wrapper){\n    SetTitle($create_supply_chain$)\n    Div(Class: row df f-valign){\n        Div(Class: col-md-3)\n        Div(Class: col-md-6){\n            Div(Class: panel panel-primary){\n                Div(Class: panel-heading, Body: LangRes(supply_chain))\n                Form(){\t\t\t\t\t\n                    Div(Class: list-group-item){\n                        Div(Class: row df f-valign){\n                            Div(Class: col-md-3 mt-sm text-right){\n                                Label(For: Object){\n                                    Span(Body: LangRes(object))\n                                }\n                            }\n                            Div(Class: col-md-9 mc-sm text-left){\n\t\t\t\t\t\t\t\tDBFind(@1supply_objects, src_objects)\n\t\t\t\t\t\t\t\tSelect(Name: Object, Source: src_objects, NameColumn: name, ValueColumn: id, Value: #object_name#)\n                            } \n                            Div(Class: col-md-3 mt-sm text-right){\n                                Label(For: Template){\n                                    Span(Body: LangRes(template))\n                                }\n                            }\n                            Div(Class: col-md-9 mc-sm text-left){\n\t\t\t\t\t\t\t\tDBFind(@1supply_templates, src_templates)\n\t\t\t\t\t\t\t\tSelect(Name: Template, Source: src_templates, NameColumn: name, ValueColumn: id)\n                            } \n                        }\n                    }\n\n                    Div(Class: panel-footer clearfix){\n                        Div(Class: pull-right){\n\t\t\t\t\t\t\tButton(Body: LangRes(start_chain), Class: btn btn-primary, Page: @1chain_start, PageParams: \"object_id=Val(Object),template_id=Val(Template)\")\n                        }\n                    }\n                }\n\n            }\n        }\n\n        Div(Class: col-md-3)\n    }\n}",
            "Menu": "default_menu"
        },
        {
            "Name": "supply_signing_act",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "SetVar(this_page, @1objects_list).(this_table, @1supply_objects)\nInclude(@1pager_header)\n\nSetTitle(\"$@1objects$\")\nSpan(Class: text-muted h5 m0 mb ml-lg, Body: Span(Class: ml-sm, Body: \"$@1objects_list$\"))\nAddToolButton(Title: $@1create_object$, Page: @1create_object, Icon: icon-plus).Popup(Header: $@1create_object$, Width: \"50\")\n\nDBFind(#this_table#, src).Custom(custom_status){\n    DBFind(#this_table#)\n    If(#status#==1){\n        Div(Class: text-normal, Body: \"$@1created$\")\n    }.ElseIf(#status#==2){\n        Div(Class: text-normal, Body: \"$@1in_chain$\")\n    }.ElseIf(#status#==3){\n        Div(Class: text-success, Body: \"$@1delivered$\")\n    }.ElseIf(#status#==4){\n        Div(Class: text-warning, Body: \"$@1delivery_failed$\")\n    }.Else{\n        Span(\"\")\n    }\n}.Custom(custom_image){\n        Image(Src: Binary().ById(#image_id#), Class: photo).Style(height: 60px;width: 60px; border: 1px solid #5A5D63; margin-right: 10px;)\n}.Custom(custom_action){\n    DBFind(#this_table#)\n    If(#status#==1){\n        Button(Body: LangRes(@1send_by_chain), Class: btn btn-primary, Page: @1chain1)\n    }.ElseIf(#status#==2){\n        Button(Body: LangRes(@1view_chain), Class: btn btn-primary, Page: @1chain_list)\n    }.ElseIf(#status#==3){\n        Button(Body: LangRes(@1view_chain), Class: btn btn-primary, Page: @1chain_list)\n    }.ElseIf(#status#==4){\n        Button(Body: LangRes(@1view_chain), Class: btn btn-primary, Page: @1chain_list)\n    }.Else{\n        Span(\"\")\n    }\n}\nDiv(fullscreen){\n    Div(table-responsive ml-lg mr-lg){\n        Div(list-group-item){\n            Table(src, \"$@1id$=id,$@1image$=custom_image,$@1name$=name,$@1object_weight$=weight,$@1status$=custom_status,$@1action$=custom_action\")                      \n        }.Style(\n            margin-top:-15px;\n            tbody > tr:nth-of-type(odd) {\n                background-color: #f8f9fc;\n            }\n        )\n    }\n}",
            "Menu": "default_menu"
        },
        {
            "Name": "template_add",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "SetVar(this_page, @1objects_list).(this_table, @1supply_objects)\nInclude(@1pager_header)\n\nSetTitle(\"$@1objects$\")\nSpan(Class: text-muted h5 m0 mb ml-lg, Body: Span(Class: ml-sm, Body: \"$@1objects_list$\"))\nAddToolButton(Title: $@1create_object$, Page: @1create_object, Icon: icon-plus).Popup(Header: $@1create_object$, Width: \"50\")\n\nDBFind(#this_table#, src).Custom(custom_status){\n    DBFind(#this_table#)\n    If(#status#==1){\n        Div(Class: text-normal, Body: \"$@1created$\")\n    }.ElseIf(#status#==2){\n        Div(Class: text-normal, Body: \"$@1in_chain$\")\n    }.ElseIf(#status#==3){\n        Div(Class: text-success, Body: \"$@1delivered$\")\n    }.ElseIf(#status#==4){\n        Div(Class: text-warning, Body: \"$@1delivery_failed$\")\n    }.Else{\n        Span(\"\")\n    }\n}.Custom(custom_image){\n        Image(Src: Binary().ById(#image_id#), Class: photo).Style(height: 60px;width: 60px; border: 1px solid #5A5D63; margin-right: 10px;)\n}.Custom(custom_action){\n    DBFind(#this_table#)\n    If(#status#==1){\n        Button(Body: LangRes(@1send_by_chain), Class: btn btn-primary, Page: @1chain1)\n    }.ElseIf(#status#==2){\n        Button(Body: LangRes(@1view_chain), Class: btn btn-primary, Page: @1chain_list)\n    }.ElseIf(#status#==3){\n        Button(Body: LangRes(@1view_chain), Class: btn btn-primary, Page: @1chain_list)\n    }.ElseIf(#status#==4){\n        Button(Body: LangRes(@1view_chain), Class: btn btn-primary, Page: @1chain_list)\n    }.Else{\n        Span(\"\")\n    }\n}\nDiv(fullscreen){\n    Div(table-responsive ml-lg mr-lg){\n        Div(list-group-item){\n            Table(src, \"$@1id$=id,$@1image$=custom_image,$@1name$=name,$@1object_weight$=weight,$@1status$=custom_status,$@1action$=custom_action\")                      \n        }.Style(\n            margin-top:-15px;\n            tbody > tr:nth-of-type(odd) {\n                background-color: #f8f9fc;\n            }\n        )\n    }\n}",
            "Menu": "default_menu"
        },
        {
            "Name": "template_add_single",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "SetVar(templates, @1objects_list).(roles, @1roles)\nDBFind(@1roles, src_roles).Where({ecosystem:#ecosystem_id#})\n\nDiv(fullscreen){\n    Div(row){\n        Div(col-sm-6 col-sm-offset-3){\n            Form(mt-lg panel panel-primary){\n                Div(panel-body){\n                    Div(row mb-sm){\n                        Div(row mb-sm){\n                            Div(col-md-4 mt-sm text-right text-bold){\n                                LangRes(template_name)\n                            }\n                            Div(col-md-8 text-left){\n                                Input(Name: Name)\n                            }\n                        }\n                        Div(row mb-sm){\n                            Div(col-sm-4 mt-sm text-right text-bold){\n                                LangRes(sender)\n                            }\n                            Div(col-sm-8 text-left){\n                                Select(Name: Sender, Source: src_roles, NameColumn: role_name, ValueColumn: id)\n                            }\n                        }\n                        Div(row mb-sm){\n                            Div(col-sm-4 mt-sm text-right text-bold){\n                                LangRes(recipient)\n                            }\n                            Div(col-sm-8 text-left){\n                                Select(Name: Recipient, Source: src_roles, NameColumn: role_name, ValueColumn: id)\n                            }\n                        }\n                        Div(row mb-sm){\n                            Div(col-sm-4 mt-sm text-right text-bold){\n                                LangRes(supply_starting_date)\n                        }\n                        Div(col-sm-8 text-left){\n                            Div(row){\n                                Div(col-sm-6){\n                                   Input(Name:StartingDate, Type:date)\n                                }\n                                Div(col-sm-6){\n                                    Input(Name:StartingTime, Type:time, Value: \"00:00\")\n                                }\n                            }\n                        }\n                    }\n                    Div(row mb-sm){\n                        Div(col-sm-4 mt-sm text-right text-bold){\n                            LangRes(supply_ending_date)\n                        }\n                        Div(col-sm-8 text-left){\n                            Div(row){\n                                Div(col-sm-6){\n                                    Input(Name:EndingDate, Type:date)\n                                }\n                                Div(col-sm-6){\n                                    Input(Name:EndingTime, Type:time, Value: \"00:00\")\n                                }\n                            }\n                        }\n                    }\n                    Div(row mb-sm){\n                        Div(col-sm-4 mt text-bold text-right){\n                            LangRes(supply_map)\n                        }\n                        Div(col-sm-8 text-left){\n                            InputMap(Name: SupplyMap, Type: point, MapType: streets)\n                        }\n                    }\n                }\n                Div(panel-footer){\n                    Button(Body: LangRes(@1back), Class: btn btn-default, Page: @1template_add)\n                    Button(Body: $@1create_template$, Class: btn btn-primary pull-right, Page: @1templates_list, Contract: CreateTemplateSingle)\n                }\n            }\n        }\n    }\n}.Style(\n    .buttons {\n        border: 1px solid #dde6e9;\n        padding: 6px 16px;\n    }\n)",
            "Menu": "default_menu"
        },
        {
            "Name": "template_create",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "SetVar(objects_page, @1objects_list).(objects_table, @1supply_objects)\nSetVar(roles_list, @1roles)\nDiv(Class: content-wrapper){\n    SetTitle($create_supply_chain$)\n\tDiv(breadcrumb){\n        LinkPage($supply_chain$, supplychains_list)\n        Span(/).Style(margin-right: 10px; margin-left: 10px;)\n\t\tSpan(Class: text-muted, Body: $create_supply_chain$)\n\t}\n\t\n    Div(Class: row df f-valign){\n        Div(Class: col-md-3)\n\n        Div(Class: col-md-6){\n            Div(Class: panel panel-primary){\n                Div(Class: panel-heading, Body: LangRes(supply_chain))\n                Form(){\n\t\t\t\t\t\t\n                    Div(Class: list-group-item){\n                        Div(Class: row df f-valign){\n                            Div(Class: col-md-3 mt-sm text-right){\n                                Label(For: supplier){\n                                    Span(Body: LangRes(supplier))\n                                }\n                            }\n                            Div(Class: col-md-9 mc-sm text-left){\n\t\t\t\t\t\t\t\tDBFind(#roles_list#, src_roles)\n\t\t\t\t\t\t\t\tSelect(Name: Recipient, Source: src_roles, NameColumn: role_name, ValueColumn: id)\n                            }\n                            Div(Class: col-md-3 mt-sm text-right){\n                                Label(For: supplier){\n                                    Span(Body: LangRes(object))\n                                }\n                            }\n                            Div(Class: col-md-9 mc-sm text-left){\n\t\t\t\t\t\t\t\tDBFind(#objects_table#, src_objects)\n\t\t\t\t\t\t\t\tSelect(Name: Object, Source: src_objects, NameColumn: name, ValueColumn: id)\n                            }  \n                        }\n                    }\n\n                    Div(Class: panel-footer clearfix){\n                        Div(Class: pull-right){\n\t\t\t\t\t\t\tButton(Body: LangRes(next_step), Class: btn btn-primary, Page: supplychains_add_step2, PageParams: \"supplier_id=Val(supplier)\")\n                        }\n                    }\n                }\n\n            }\n        }\n\n        Div(Class: col-md-3)\n    }\n}",
            "Menu": "default_menu"
        },
        {
            "Name": "template_multisteps",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "SetVar(templates, @1objects_list).(roles, @1roles)\nDBFind(@1roles, src_roles).Where({ecosystem:#ecosystem_id#})\n\nDiv(fullscreen){\n    Div(row){\n        Div(col-sm-6 col-sm-offset-3){\n            Form(mt-lg panel panel-primary){\n                Div(panel-body){\n                    Div(row mb-sm){\n                        Div(row mb-sm){\n                            Div(col-md-4 mt-sm text-right text-bold){\n                                LangRes(template_name)\n                            }\n                            Div(col-md-8 text-left){\n                                Input(Name: Name)\n                            }\n                        }\n                        If(GetVar(cs)==\"\"){\n                            SetVar(cs,1)\n                        }\n                        If(#del# == 0){\n                            SetVar(cs,Calculate(#cs# - 1))\n                        }.Else{\n                            SetVar(cs,Calculate(#cs# + 1))\n                        }\n                        Range(params_range, 0, #cs#)\n                        ForList(Source: params_range){\n                            Div(row mb-sm){\n                                Div(col-sm-4 mt-sm text-right text-bold){\n                                    LangRes(supply_sender)\n                                }\n                                Div(col-sm-8 text-left){\n                                    Select(Name: Sender, Source: src_roles, NameColumn: role_name, ValueColumn: id)\n                                }\n                            }\n                            Div(row mb-sm){\n                                Div(col-sm-4 mt-sm text-right text-bold){\n                                    LangRes(supply_recipient)\n                                }\n                                Div(col-sm-8 text-left){\n                                    Select(Name: Recipient, Source: src_roles, NameColumn: role_name, ValueColumn: id)\n                                }\n                            }\n                            Div(row mb-sm){\n                                Div(col-sm-4 mt-sm text-right text-bold){\n                                    LangRes(supply_starting_date)\n                            }\n                            Div(col-sm-8 text-left){\n                                Div(row){\n                                    Div(col-sm-6){\n                                        Input(Name:EndingDate, Type:date)\n                                    }\n                                    Div(col-sm-6){\n                                        Input(Name:StartingTime, Type:time, Value: \"00:00\")\n                                    }\n                                }\n                            }\n                        }\n                        Div(row mb-sm){\n                            Div(col-sm-4 mt-sm text-right text-bold){\n                                LangRes(supply_ending_date)\n                            }\n                            Div(col-sm-8 text-left){\n                                Div(row){\n                                    Div(col-sm-6){\n                                        Input(Name:EndingDate, Type:date)\n                                    }\n                                    Div(col-sm-6){\n                                        Input(Name:EndingTime, Type:time, Value: \"00:00\")\n                                    }\n                                }\n                            }\n                        }\n                        Div(row){\n                            Div(col-md-6 mt-lg text-right){\n                                LinkPage(Body:$@1ldelete_stage$, Page: @1ltemplate_multisteps, PageParams:\"cs=#cs#,del=1\"\n                            }\n                            Div(col-md-6 mt-lg text-right){\n                                LinkPage(Body:$@1lstage_add$, Page: @1ltemplate_multisteps, PageParams:\"cs=#cs#\")\n                            }\n                        }\n                    }\n                    Div(row mb-sm){\n                        Div(col-sm-4 mt-sm text-right text-bold){\n                            LangRes(total_steps)\n                        }\n                        Div(col-sm-8 text-left){\n                            Input(Name: Steps, Value: #cs#)\n                        }\n                    }\n                    Div(row mb-sm){\n                        Div(col-sm-4 mt text-bold text-right){\n                            LangRes(supply_map)\n                        }\n                        Div(col-sm-8 text-left){\n                            InputMap(Name: SupplyMap, Type: point, MapType: streets)\n                        }\n                    }\n                }\n                Div(panel-footer){\n                    Button(Body: LangRes(@1back), Class: btn btn-default, Page: @1template_add)\n                    Button(Body: $@1create$, Class: btn btn-primary pull-right, Page: @1templates_list, Contract: CreateTemplate)\n                }\n            }\n        }\n    }\n}.Style(\n    .buttons{\n        border: 1px solid #dde6e9;\n        padding: 6px 16px;)\n    }\n}",
            "Menu": "default_menu"
        },
        {
            "Name": "templates_list",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "SetVar(this_page, @1templates_list).(this_table, @1supply_templates)\nInclude(@1pager_header)\nSetTitle(\"$@1templates$\")\nSpan(Class: text-muted h5 m0 mb ml-lg, Body: Span(Class: ml-sm, Body: \"$@1templates_list$\"))\nAddToolButton(Title: Add template, Page: @1template_add, Icon: icon-plus).Popup(Header: $@1create_template$, Width: \"80\")\n\nDBFind(#this_table#, src).Columns(\"id,name,chain->sender_id,chain->recipient_id,chain->starting,chain->ending,chain->cords,chain->sender_role_name,chain->recipient_role_name\").Custom(date_start){\n    Div(Class:h5){DateTime(DateTime: #chain.starting#, Format: \"YYYY.MM.DD HH:MI:SS\")}\n}.Custom(date_end){\n    Div(Class:h5){DateTime(DateTime: #chain.ending#, Format: \"YYYY.MM.DD HH:MI:SS\")}\n}\n\n\nDiv(fullscreen){\n    Div(table-responsive ml-lg mr-lg){\n        Div(list-group-item){\n            Table(src, \"$@1id$=id,$@1name$=name,$@1sender$=chain.sender_role_name,$@1recipient$=chain.recipient_role_name, $@1date_start$=date_start,$@1date_end$=date_end\").                   \n        }.Style(\n            margin-top:-15px;\n            tbody > tr:nth-of-type(odd) {\n                background-color: #f8f9fc;\n            }\n        )\n    }\n}",
            "Menu": "default_menu"
        },
        {
            "Name": "templates_multisteps",
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "DBFind(@1roles, src_roles).Where({ecosystem:#ecosystem_id#})\nDiv(fullscreen){\n    Div(row){\n        Div(col-sm-6 col-sm-offset-3){\n            Form(mt-lg panel panel-primary){\n                Div(panel-body){\n                    Div(row mb-sm){\n                        Div(row mb-sm){\n                            Div(col-md-4 mt-sm text-right text-bold){\n                                LangRes(template_name)\n                            }\n                            Div(col-md-8 text-left){\n                                Input(Name: Name)\n                            }\n                        }\n                        If(GetVar(cs)==\"\"){\n                            SetVar(cs,0)\n                        }\n                        If(#del# == 1){\n                            SetVar(cs,Calculate(#cs# - 1))\n                        }.Else{\n                            SetVar(cs,Calculate(#cs# + 1))\n                        }\n                        Range(params_range, 0, #cs#)\n                        ForList(Source: params_range){\n                            Div(row mb-sm){\n                                Div(col-sm-4 mt-sm text-right text-bold){\n                                    LangRes(supply_sender)\n                                }\n                                Div(col-sm-8 text-left){\n                                    Select(Name: Sender, Source: src_roles, NameColumn: role_name, ValueColumn: id)\n                                }\n                            }\n                            Div(row mb-sm){\n                                Div(col-sm-4 mt-sm text-right text-bold){\n                                    LangRes(supply_recipient)\n                                }\n                                Div(col-sm-8 text-left){\n                                    Select(Name: Recipient, Source: src_roles, NameColumn: role_name, ValueColumn: id)\n                                }\n                            }\n                            Div(row mb-sm){\n                                Div(col-sm-4 mt-sm text-right text-bold){\n                                    LangRes(supply_starting_date)\n                            }\n                            Div(col-sm-8 text-left){\n                                Div(row){\n                                    Div(col-sm-6){\n                                        Input(Name:StartingDate, Type:date)\n                                    }\n                                    Div(col-sm-6){\n                                        Input(Name:StartingTime, Type:time, Value: \"00:00\")\n                                    }\n                                }\n                            }\n                        }\n                        Div(row mb-sm){\n                            Div(col-sm-4 mt-sm text-right text-bold){\n                                LangRes(supply_ending_date)\n                            }\n                            Div(col-sm-8 text-left){\n                                Div(row){\n                                    Div(col-sm-6){\n                                        Input(Name:EndingDate, Type:date)\n                                    }\n                                    Div(col-sm-6){\n                                        Input(Name:EndingTime, Type:time, Value: \"00:00\")\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    Div(row){\n                        Div(col-md-6 mt-lg text-right){\n                            If(#cs#>1){\n                                LinkPage(Body:$@1lstage_delete$, Page: @1templates_multisteps, PageParams:\"cs=#cs#,del=1\")\n                            }\n                        }\n                        Div(col-md-6 mt-lg text-right){\n                            LinkPage(Body:$@1lstage_add$, Page: @1templates_multisteps, PageParams:\"cs=#cs#\")\n                        }\n                    }\n                    Div(row mb-sm){\n                        Div(col-sm-4 mt text-bold text-right){\n                            LangRes(total_steps)\n                        }\n                        Div(col-sm-8 text-left){\n                            Input(Name: Steps, Value: #cs#)\n                        }\n                    }\n                    Div(row mb-sm){\n                        Div(col-sm-4 mt text-bold text-right){\n                            LangRes(supply_map)\n                        }\n                        Div(col-sm-8 text-left){\n                            InputMap(Name: SupplyMap, Type: point, MapType: streets)\n                        }\n                    }\n                }\n                Div(panel-footer){\n                    Button(Body: LangRes(@1back), Class: btn btn-default, Page: @1template_add)\n                    Button(Body: $@1create$, Class: btn btn-primary pull-right, Page: @1templates_list, Contract: CreateTemplateMultisteps)\n                }\n            }\n        }\n    }\n}.Style(\n    .buttons{\n        border: 1px solid #dde6e9;\n        padding: 6px 16px;)\n    }\n}",
            "Menu": "default_menu"
        }
    ],
    "parameters": [],
    "tables": [
        {
            "Name": "supply_chains",
            "Columns": "[{\"name\":\"date_end\",\"conditions\":\"true\",\"type\":\"datetime\"},{\"name\":\"date_start\",\"conditions\":\"true\",\"type\":\"datetime\"},{\"name\":\"object_id\",\"conditions\":\"{\\\"update\\\":\\\"true\\\",\\\"read\\\":\\\"true\\\"}\",\"type\":\"number\"},{\"name\":\"object_name\",\"conditions\":\"true\",\"type\":\"text\"},{\"name\":\"recipients_id\",\"conditions\":\"{\\\"update\\\":\\\"true\\\",\\\"read\\\":\\\"true\\\"}\",\"type\":\"number\"},{\"name\":\"senders_id\",\"conditions\":\"{\\\"update\\\":\\\"true\\\",\\\"read\\\":\\\"true\\\"}\",\"type\":\"number\"},{\"name\":\"status\",\"conditions\":\"true\",\"type\":\"number\"},{\"name\":\"template_edit\",\"conditions\":\"true\",\"type\":\"json\"},{\"name\":\"template_id\",\"conditions\":\"{\\\"update\\\":\\\"true\\\",\\\"read\\\":\\\"true\\\"}\",\"type\":\"number\"},{\"name\":\"template_name\",\"conditions\":\"true\",\"type\":\"text\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        },
        {
            "Name": "supply_objects",
            "Columns": "[{\"name\":\"image_id\",\"conditions\":\"true\",\"type\":\"number\"},{\"name\":\"name\",\"conditions\":\"true\",\"type\":\"text\"},{\"name\":\"status\",\"conditions\":\"true\",\"type\":\"number\"},{\"name\":\"weight\",\"conditions\":\"true\",\"type\":\"number\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        },
        {
            "Name": "supply_stages",
            "Columns": "[{\"name\":\"chain_id\",\"conditions\":\"true\",\"type\":\"number\"},{\"name\":\"recipient_id\",\"conditions\":\"true\",\"type\":\"number\"},{\"name\":\"recipient_sign_time\",\"conditions\":\"true\",\"type\":\"datetime\"},{\"name\":\"sender_id\",\"conditions\":\"true\",\"type\":\"number\"},{\"name\":\"sender_sign_time\",\"conditions\":\"true\",\"type\":\"datetime\"},{\"name\":\"stage_id\",\"conditions\":\"true\",\"type\":\"number\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        },
        {
            "Name": "supply_templates",
            "Columns": "[{\"name\":\"chain\",\"conditions\":\"true\",\"type\":\"json\"},{\"name\":\"counter\",\"conditions\":\"true\",\"type\":\"number\"},{\"name\":\"deleted\",\"conditions\":\"true\",\"type\":\"number\"},{\"name\":\"name\",\"conditions\":\"true\",\"type\":\"text\"},{\"name\":\"total_steps\",\"conditions\":\"{\\\"update\\\":\\\"true\\\",\\\"read\\\":\\\"true\\\"}\",\"type\":\"number\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}"
        }
    ]
}